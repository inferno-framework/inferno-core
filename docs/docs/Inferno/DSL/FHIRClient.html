<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Inferno::DSL::FHIRClient
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Inferno::DSL::FHIRClient";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Inferno.html" title="Inferno (module)">Inferno</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../DSL.html" title="Inferno::DSL (module)">DSL</a></span></span>
     &raquo; 
    <span class="title">FHIRClient</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Inferno::DSL::FHIRClient
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/inferno/dsl/fhir_client.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This module contains the FHIR DSL available to test writers.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>MyTestGroup</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="../../Inferno.html" title="Inferno (module)">Inferno</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Inferno.html#TestGroup-constant" title="Inferno::TestGroup (constant)">TestGroup</a></span></span>
  <span class='comment'># create a &quot;default&quot; client for a group
</span>  <span class='id identifier rubyid_fhir_client'>fhir_client</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_url'>url</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://example.com/fhir</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># create a named client for a group
</span>  <span class='id identifier rubyid_fhir_client'>fhir_client</span> <span class='symbol'>:with_custom_header</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_url'>url</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://example.com/fhir</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_headers'>headers</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>X-my-custom-header</span><span class='label_end'>&#39;:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ABC123</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_test'>test</span> <span class='symbol'>:some_test</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_run'>run</span> <span class='kw'>do</span>
      <span class='comment'># uses the default client
</span>      <span class='id identifier rubyid_fhir_read'>fhir_read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Patient</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>5</span><span class='rparen'>)</span>

      <span class='comment'># uses a named client
</span>      <span class='id identifier rubyid_fhir_read'>fhir_read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Patient</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:with_custom_header</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_request'>request</span>  <span class='comment'># the most recent request
</span>      <span class='id identifier rubyid_response'>response</span> <span class='comment'># the most recent response
</span>      <span class='id identifier rubyid_resource'>resource</span> <span class='comment'># the resource from the most recent response
</span>      <span class='id identifier rubyid_requests'>requests</span> <span class='comment'># all of the requests which have been made in this test
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="FHIRClientBuilder.html" title="Inferno::DSL::FHIRClientBuilder (class)">Documentation for the client configuration DSL</a></span></li>
    
  </ul>

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="FHIRClient/ClassMethods.html" title="Inferno::DSL::FHIRClient::ClassMethods (module)">ClassMethods</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_all_bundled_resources-instance_method" title="#fetch_all_bundled_resources (instance method)">#<strong>fetch_all_bundled_resources</strong>(resource_type:, bundle: resource, reply_handler: nil, client: :default, max_pages: 20, additional_resource_types: [], tags: [])  &#x21d2; Array&lt;FHIR::Resource&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch all resources from a paginated FHIR bundle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_client-instance_method" title="#fhir_client (instance method)">#<strong>fhir_client</strong>(client = :default)  &#x21d2; FHIR::Client </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return a previously defined FHIR client.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_create-instance_method" title="#fhir_create (instance method)">#<strong>fhir_create</strong>(resource, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR create interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_delete-instance_method" title="#fhir_delete (instance method)">#<strong>fhir_delete</strong>(resource_type, id, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR delete interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_get_capability_statement-instance_method" title="#fhir_get_capability_statement (instance method)">#<strong>fhir_get_capability_statement</strong>(client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Fetch the capability statement.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_history-instance_method" title="#fhir_history (instance method)">#<strong>fhir_history</strong>(resource_type = nil, id = nil, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR history interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_operation-instance_method" title="#fhir_operation (instance method)">#<strong>fhir_operation</strong>(path, body: nil, client: :default, name: nil, headers: {}, operation_method: :post, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR operation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_patch-instance_method" title="#fhir_patch (instance method)">#<strong>fhir_patch</strong>(resource_type, id, patchset, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR patch interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_read-instance_method" title="#fhir_read (instance method)">#<strong>fhir_read</strong>(resource_type, id, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR read interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_search-instance_method" title="#fhir_search (instance method)">#<strong>fhir_search</strong>(resource_type = nil, client: :default, params: {}, name: nil, search_method: :get, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR search interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_transaction-instance_method" title="#fhir_transaction (instance method)">#<strong>fhir_transaction</strong>(bundle = nil, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR batch/transaction interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_update-instance_method" title="#fhir_update (instance method)">#<strong>fhir_update</strong>(resource, id, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR update interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fhir_vread-instance_method" title="#fhir_vread (instance method)">#<strong>fhir_vread</strong>(resource_type, id, version_id, client: :default, name: nil, tags: [])  &#x21d2; Inferno::Entities::Request </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Perform a FHIR vread interaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_fhir_client_definition-instance_method" title="#find_fhir_client_definition (instance method)">#<strong>find_fhir_client_definition</strong>(client)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="fetch_all_bundled_resources-instance_method">
  
    #<strong>fetch_all_bundled_resources</strong>(resource_type:, bundle: resource, reply_handler: nil, client: :default, max_pages: 20, additional_resource_types: [], tags: [])  &#x21d2; <tt>Array&lt;FHIR::Resource&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch all resources from a paginated FHIR bundle</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The expected resource type to fetch.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>bundle</span>
      
      
        <span class='type'>(<tt>FHIR::Bundle</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>resource</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The initial FHIR bundle to process. Defaults to <code>self.resource</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>reply_handler</span>
      
      
        <span class='type'>(<tt>Proc</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>A handler for processing replies. Optional.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Defaults to <code>:default</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>max_pages</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>20</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Maximum number of pages to fetch. Defaults to 20.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>additional_resource_types</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Additional resource types acceptable in the results.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>for request tagging. Optional.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;FHIR::Resource&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An array of fetched FHIR resources.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch_all_bundled_resources'>fetch_all_bundled_resources</span><span class='lparen'>(</span> <span class='comment'># rubocop:disable Metrics/CyclomaticComplexity
</span>  <span class='label'>resource_type:</span><span class='comma'>,</span>
  <span class='label'>bundle:</span> <span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span>
  <span class='label'>reply_handler:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span>
  <span class='label'>max_pages:</span> <span class='int'>20</span><span class='comma'>,</span>
  <span class='label'>additional_resource_types:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span>
  <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_page_count'>page_count</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_resources'>resources</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='kw'>while</span> <span class='id identifier rubyid_bundle'>bundle</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_page_count'>page_count</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_max_pages'>max_pages</span>
    <span class='id identifier rubyid_resources'>resources</span> <span class='op'>+=</span> <span class='id identifier rubyid_bundle'>bundle</span><span class='period'>.</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>&amp;.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span> <span class='id identifier rubyid_entry'>entry</span><span class='op'>&amp;.</span><span class='id identifier rubyid_resource'>resource</span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_reply_handler'>reply_handler</span><span class='op'>&amp;.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>

    <span class='kw'>break</span> <span class='kw'>if</span> <span class='id identifier rubyid_next_bundle_link'>next_bundle_link</span><span class='lparen'>(</span><span class='id identifier rubyid_bundle'>bundle</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

    <span class='id identifier rubyid_bundle'>bundle</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch_next_bundle'>fetch_next_bundle</span><span class='lparen'>(</span><span class='id identifier rubyid_bundle'>bundle</span><span class='comma'>,</span> <span class='id identifier rubyid_client'>client</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_page_count'>page_count</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:nil?</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_warning'>warning</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Inferno detected one or more bundle entries with no `resource` element, </span><span class='tstring_end'>&#39;</span></span> \
            <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>which is not allowed for a FHIR Bundle with `type` = &quot;searchset&quot;.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_valid_resource_types'>valid_resource_types</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>OperationOutcome</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_concat'>concat</span><span class='lparen'>(</span><span class='id identifier rubyid_additional_resource_types'>additional_resource_types</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_compact!'>compact!</span>

  <span class='id identifier rubyid_invalid_resource_types'>invalid_resource_types</span> <span class='op'>=</span>
    <span class='id identifier rubyid_resources'>resources</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span> <span class='id identifier rubyid_valid_resource_types'>valid_resource_types</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_entry'>entry</span><span class='period'>.</span><span class='id identifier rubyid_resourceType'>resourceType</span> <span class='rbrace'>}</span>
      <span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:resourceType</span><span class='rparen'>)</span>
      <span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_invalid_resource_types'>invalid_resource_types</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
    <span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Received resource type(s) </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_invalid_resource_types'>invalid_resource_types</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> in search bundle, </span><span class='tstring_end'>&quot;</span></span> \
         <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>but only expected resource types </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_valid_resource_types'>valid_resource_types</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'>. </span><span class='tstring_end'>&quot;</span></span> \
         <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This is unusual but allowed if the server believes additional resource types are relevant.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_resources'>resources</span>
<span class='kw'>rescue</span> <span class='const'>JSON</span><span class='op'>::</span><span class='const'>ParserError</span>
  <span class='const'><span class='object_link'><a href="../../Inferno.html" title="Inferno (module)">Inferno</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Application.html" title="Inferno::Application (class)">Application</a></span></span><span class='lbracket'>[</span><span class='symbol'>:logger</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Could not resolve next bundle: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_next_bundle_link'>next_bundle_link</span><span class='lparen'>(</span><span class='id identifier rubyid_bundle'>bundle</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_resources'>resources</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_client-instance_method">
  
    #<strong>fhir_client</strong>(client = :default)  &#x21d2; <tt><span class='object_link'><a href="../../FHIR/Client.html" title="FHIR::Client (class)">FHIR::Client</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return a previously defined FHIR client</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the name of the client</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../FHIR/Client.html" title="FHIR::Client (class)">FHIR::Client</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="FHIRClientBuilder.html" title="Inferno::DSL::FHIRClientBuilder (class)">Inferno::DSL::FHIRClientBuilder</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span> <span class='op'>=</span> <span class='symbol'>:default</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fhir_clients'>fhir_clients</span><span class='lbracket'>[</span><span class='id identifier rubyid_client'>client</span><span class='rbracket'>]</span> <span class='op'>||=</span>
    <span class='const'><span class='object_link'><a href="FHIRClientBuilder.html" title="Inferno::DSL::FHIRClientBuilder (class)">FHIRClientBuilder</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_find_fhir_client_definition'>find_fhir_client_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_create-instance_method">
  
    #<strong>fhir_create</strong>(resource, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR create interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../FHIR/Model.html" title="FHIR::Model (class)">FHIR::Model</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 162</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_create'>fhir_create</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_delete-instance_method">
  
    #<strong>fhir_delete</strong>(resource_type, id, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR delete interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311
312
313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 309</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_delete'>fhir_delete</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request'>store_request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>outgoing</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>name:</span><span class='comma'>,</span> <span class='label'>tags:</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_destroy'>destroy</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_get_capability_statement-instance_method">
  
    #<strong>fhir_get_capability_statement</strong>(client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Fetch the capability statement.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 145</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_get_capability_statement'>fhir_get_capability_statement</span><span class='lparen'>(</span><span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_conformance_statement'>conformance_statement</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_reply'>reply</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_history-instance_method">
  
    #<strong>fhir_history</strong>(resource_type = nil, id = nil, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR history interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254
255
256
257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_history'>fhir_history</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_resource_instance_history'>resource_instance_history</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='kw'>elsif</span> <span class='id identifier rubyid_resource_type'>resource_type</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_resource_history'>resource_history</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_all_history'>all_history</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_operation-instance_method">
  
    #<strong>fhir_operation</strong>(path, body: nil, client: :default, name: nil, headers: {}, operation_method: :post, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>This is a placeholder method until the FHIR::Client supports
general operations.  Note that while both POST and GET methods are allowed,
GET is only allowed when the operation does not affect the serverâ€™s state.
See https://build.fhir.org/operationdefinition-definitions.html#OperationDefinition.affectsState</p>
</div>
  </div>

  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Currently does not allow for repeated parameters if using GET</p>
</div>
  </div>

<p>Perform a FHIR operation</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>body</span>
      
      
        <span class='type'>(<tt>FHIR::Parameters</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Must all be primitive if making GET request</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>headers</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>custom headers for this operation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation_method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:post</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>indicates which request type to use for the operation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_operation'>fhir_operation</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span>
  <span class='label'>body:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span>
  <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>headers:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>operation_method:</span> <span class='symbol'>:post</span><span class='comma'>,</span>
  <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_operation_headers'>operation_headers</span> <span class='op'>=</span> <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_fhir_headers'>fhir_headers</span>
      <span class='id identifier rubyid_operation_headers'>operation_headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Content-Type</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/fhir+json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_operation_headers'>operation_headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_headers'>headers</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='kw'>case</span> <span class='id identifier rubyid_operation_method'>operation_method</span>
      <span class='kw'>when</span> <span class='symbol'>:post</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_body'>body</span><span class='comma'>,</span> <span class='id identifier rubyid_operation_headers'>operation_headers</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='symbol'>:get</span>
        <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_body_to_path'>body_to_path</span><span class='lparen'>(</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_body'>body</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:get</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_operation_headers'>operation_headers</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='const'><span class='object_link'><a href="../../Inferno.html" title="Inferno (module)">Inferno</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Application.html" title="Inferno::Application (class)">Application</a></span></span><span class='lbracket'>[</span><span class='symbol'>:logger</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot perform </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation_method'>operation_method</span><span class='embexpr_end'>}</span><span class='tstring_content'> requests, use GET or POST</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot perform </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_operation_method'>operation_method</span><span class='embexpr_end'>}</span><span class='tstring_content'> requests, use GET or POST</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_patch-instance_method">
  
    #<strong>fhir_patch</strong>(resource_type, id, patchset, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR patch interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>patchset</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_patch'>fhir_patch</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_patchset'>patchset</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_partial_update'>partial_update</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_patchset'>patchset</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_read-instance_method">
  
    #<strong>fhir_read</strong>(resource_type, id, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR read interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 179</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_read'>fhir_read</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_search-instance_method">
  
    #<strong>fhir_search</strong>(resource_type = nil, client: :default, params: {}, name: nil, search_method: :get, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR search interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the search params</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>search_method</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:get</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Use <code>:post</code> to search via POST</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_search'>fhir_search</span><span class='lparen'>(</span>
  <span class='id identifier rubyid_resource_type'>resource_type</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span>
  <span class='label'>params:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
  <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
  <span class='label'>search_method:</span> <span class='symbol'>:get</span><span class='comma'>,</span>
  <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='rparen'>)</span>
  <span class='id identifier rubyid_search'>search</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_search_method'>search_method</span> <span class='op'>==</span> <span class='symbol'>:post</span>
      <span class='lbrace'>{</span> <span class='label'>body:</span> <span class='id identifier rubyid_params'>params</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='lbrace'>{</span> <span class='label'>parameters:</span> <span class='id identifier rubyid_params'>params</span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>

  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_resource_type'>resource_type</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span>
          <span class='period'>.</span><span class='id identifier rubyid_search'>search</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='label'>search:</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_search_all'>search_all</span><span class='lparen'>(</span><span class='lbrace'>{</span> <span class='label'>search:</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_transaction-instance_method">
  
    #<strong>fhir_transaction</strong>(bundle = nil, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR batch/transaction interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>bundle</span>
      
      
        <span class='type'>(<tt>FHIR::Bundle</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the FHIR batch/transaction Bundle</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


325
326
327
328
329
330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 325</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_transaction'>fhir_transaction</span><span class='lparen'>(</span><span class='id identifier rubyid_bundle'>bundle</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request'>store_request</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>outgoing</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>name:</span><span class='comma'>,</span> <span class='label'>tags:</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_transaction_bundle'>transaction_bundle</span> <span class='op'>=</span> <span class='id identifier rubyid_bundle'>bundle</span> <span class='kw'>if</span> <span class='id identifier rubyid_bundle'>bundle</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_end_transaction'>end_transaction</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_update-instance_method">
  
    #<strong>fhir_update</strong>(resource, id, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR update interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../FHIR/Model.html" title="FHIR::Model (class)">FHIR::Model</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


214
215
216
217
218
219
220</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 214</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_update'>fhir_update</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fhir_vread-instance_method">
  
    #<strong>fhir_vread</strong>(resource_type, id, version_id, client: :default, name: nil, tags: [])  &#x21d2; <tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Perform a FHIR vread interaction.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource_type</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>, <tt>Class</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>version_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>client</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:default</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Name for this request to allow it to be used by
other tests</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tags</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>a list of tags to assign to the request</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Entities/Request.html" title="Inferno::Entities::Request (class)">Inferno::Entities::Request</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fhir_vread'>fhir_vread</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_version_id'>version_id</span><span class='comma'>,</span> <span class='label'>client:</span> <span class='symbol'>:default</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>tags:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_store_request_and_refresh_token'>store_request_and_refresh_token</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_tags'>tags</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_tcp_exception_handler'>tcp_exception_handler</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_fhir_client'>fhir_client</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_vread'>vread</span><span class='lparen'>(</span><span class='id identifier rubyid_fhir_class_from_resource_type'>fhir_class_from_resource_type</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_type'>resource_type</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_version_id'>version_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_fhir_client_definition-instance_method">
  
    #<strong>find_fhir_client_definition</strong>(client)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_client.rb', line 58</span>

<span class='kw'>def</span> <span class='id identifier rubyid_find_fhir_client_definition'>find_fhir_client_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_find_fhir_client_definition'>find_fhir_client_definition</span><span class='lparen'>(</span><span class='id identifier rubyid_client'>client</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Feb  6 15:52:10 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.6).
</div>

    </div>
  </body>
</html>