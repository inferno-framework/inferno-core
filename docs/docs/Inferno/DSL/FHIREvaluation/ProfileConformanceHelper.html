<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Inferno::DSL::FHIREvaluation::ProfileConformanceHelper
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Inferno::DSL::FHIREvaluation::ProfileConformanceHelper";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Inferno.html" title="Inferno (module)">Inferno</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../DSL.html" title="Inferno::DSL (module)">DSL</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../FHIREvaluation.html" title="Inferno::DSL::FHIREvaluation (module)">FHIREvaluation</a></span></span>
     &raquo; 
    <span class="title">ProfileConformanceHelper</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Inferno::DSL::FHIREvaluation::ProfileConformanceHelper
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Rules/AllMustSupportsPresent.html" title="Inferno::DSL::FHIREvaluation::Rules::AllMustSupportsPresent (class)">Rules::AllMustSupportsPresent</a></span>, <span class='object_link'><a href="Rules/AllProfilesHaveExamples.html" title="Inferno::DSL::FHIREvaluation::Rules::AllProfilesHaveExamples (class)">Rules::AllProfilesHaveExamples</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/inferno/dsl/fhir_evaluation/profile_conformance_helper.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This module is used to decide whether a resource instantiates a given profile.
Aligning resources to profiles is necessary when evaluating the comprehensiveness
of the resources with respect to those profiles, unfortunately it’s impossible to
programmatically determine intent. (i.e, is this resource supposed to instantiate this profile?)
This module offers some approaches to make that determination.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEFAULT_OPTIONS-constant" class="">DEFAULT_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='label'>considerMetaProfile:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>considerValidationResults:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>considerOnlyResourceType:</span> <span class='kw'>false</span>
<span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#conforms_to_profile%3F-instance_method" title="#conforms_to_profile? (instance method)">#<strong>conforms_to_profile?</strong>(resource, profile, options = DEFAULT_OPTIONS, validator = nil) {|resource| ... } &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check whether the given resource conforms to the given profile, using the given options to select which approaches are considered.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#declares_meta_profile%3F-instance_method" title="#declares_meta_profile? (instance method)">#<strong>declares_meta_profile?</strong>(resource, profile)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if the given resource claims conformance to the profile, versioned or unversioned, based on resource.meta.profile.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#validates_profile%3F-instance_method" title="#validates_profile? (instance method)">#<strong>validates_profile?</strong>(resource, profile, validator)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if the given resource validates against the given profile.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="conforms_to_profile?-instance_method">
  
    #<strong>conforms_to_profile?</strong>(resource, profile, options = DEFAULT_OPTIONS, validator = nil) {|resource| ... } &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check whether the given resource conforms to the given profile, using the given options
to select which approaches are considered.
Current options:
- If the resource is the right resourceType
- If the resource claims conformance in resource.meta.profile
- If the resource validates against the profile using the FHIR validator (NOT YET IMPLEMENTED)
- If the resource meets other criteria defined in the block.
  As an example, the block may look for the presence of certain codes, such as LOINC “8867-4”
  in an Observation category code suggests that the resource intended to conform to a “Heart Rate” profile</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>FHIR::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>profile</span>
      
      
        <span class='type'>(<tt>FHIR::StructureDefinition</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>DEFAULT_OPTIONS</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>Hash of boolean-valued options. See DEFAULT_OPTIONS for defaults and keys</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>validator</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../FHIRResourceValidation/Validator.html" title="Inferno::DSL::FHIRResourceValidation::Validator (class)">Inferno::DSL::FHIRResourceValidation::Validator</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
    </li>
  
</ul>

<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>FHIR::Resource</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The original resource</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38
39
40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_evaluation/profile_conformance_helper.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_conforms_to_profile?'>conforms_to_profile?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#DEFAULT_OPTIONS-constant" title="Inferno::DSL::FHIREvaluation::ProfileConformanceHelper::DEFAULT_OPTIONS (constant)">DEFAULT_OPTIONS</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_validator'>validator</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'># rubocop:disable Metrics/CyclomaticComplexity
</span>  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_resource'>resource</span><span class='period'>.</span><span class='id identifier rubyid_resourceType'>resourceType</span> <span class='op'>!=</span> <span class='id identifier rubyid_profile'>profile</span><span class='period'>.</span><span class='id identifier rubyid_type'>type</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:considerOnlyResourceType</span><span class='rbracket'>]</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:considerMetaProfile</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_declares_meta_profile?'>declares_meta_profile?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:considerValidationResults</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_validates_profile?'>validates_profile?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span> <span class='id identifier rubyid_validator'>validator</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>

  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="declares_meta_profile?-instance_method">
  
    #<strong>declares_meta_profile?</strong>(resource, profile)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if the given resource claims conformance to the profile, versioned or unversioned,
based on resource.meta.profile.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>FHIR::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>profile</span>
      
      
        <span class='type'>(<tt>FHIR::StructureDefinition</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_evaluation/profile_conformance_helper.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_declares_meta_profile?'>declares_meta_profile?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_declared_profiles'>declared_profiles</span> <span class='op'>=</span> <span class='id identifier rubyid_resource'>resource</span><span class='op'>&amp;.</span><span class='id identifier rubyid_meta'>meta</span><span class='op'>&amp;.</span><span class='id identifier rubyid_profile'>profile</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_profile_url'>profile_url</span> <span class='op'>=</span> <span class='id identifier rubyid_profile'>profile</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span>
  <span class='id identifier rubyid_versioned_url'>versioned_url</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_profile_url'>profile_url</span><span class='embexpr_end'>}</span><span class='tstring_content'>|</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_profile'>profile</span><span class='period'>.</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_declared_profiles'>declared_profiles</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_profile_url'>profile_url</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_declared_profiles'>declared_profiles</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_versioned_url'>versioned_url</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="validates_profile?-instance_method">
  
    #<strong>validates_profile?</strong>(resource, profile, validator)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if the given resource validates against the given profile.
“Validates” means the provided Validator instance returns no fatal or error messages.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>resource</span>
      
      
        <span class='type'>(<tt>FHIR::Resource</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>profile</span>
      
      
        <span class='type'>(<tt>FHIR::StructureDefinition</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>validator</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../FHIRResourceValidation/Validator.html" title="Inferno::DSL::FHIRResourceValidation::Validator (class)">Inferno::DSL::FHIRResourceValidation::Validator</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/inferno/dsl/fhir_evaluation/profile_conformance_helper.rb', line 63</span>

<span class='kw'>def</span> <span class='id identifier rubyid_validates_profile?'>validates_profile?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='comma'>,</span> <span class='id identifier rubyid_validator'>validator</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id identifier rubyid_validator'>validator</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='id identifier rubyid_runnable'>runnable</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Inferno.html" title="Inferno (module)">Inferno</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Entities.html" title="Inferno::Entities (module)">Entities</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Entities/Test.html" title="Inferno::Entities::Test (class)">Test</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='id identifier rubyid_validator'>validator</span><span class='period'>.</span><span class='id identifier rubyid_resource_is_valid?'>resource_is_valid?</span><span class='lparen'>(</span><span class='id identifier rubyid_resource'>resource</span><span class='comma'>,</span> <span class='id identifier rubyid_profile'>profile</span><span class='period'>.</span><span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_runnable'>runnable</span><span class='comma'>,</span> <span class='label'>add_messages_to_runnable:</span> <span class='kw'>false</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jul 30 13:16:42 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.6).
</div>

    </div>
  </body>
</html>